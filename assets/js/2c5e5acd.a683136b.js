"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8810],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),h=r,k=u["".concat(p,".").concat(h)]||u[h]||d[h]||a;return n?o.createElement(k,i(i({ref:t},c),{},{components:n})):o.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8458:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:1,title:"Authentication",tags:["Auth","Authentication","Login","Token","Tokens","Refresh","Refresh Token","Refresh Tokens"]},i=void 0,s={unversionedId:"endpoints/authentication",id:"endpoints/authentication",title:"Authentication",description:"To use any Endpoints of this API you will first need to Authenticate.",source:"@site/docs/endpoints/authentication.md",sourceDirName:"endpoints",slug:"/endpoints/authentication",permalink:"/next/endpoints/authentication",draft:!1,editUrl:"https://github.com/noten-app/docs/tree/main/docs/endpoints/authentication.md",tags:[{label:"Auth",permalink:"/next/tags/auth"},{label:"Authentication",permalink:"/next/tags/authentication"},{label:"Login",permalink:"/next/tags/login"},{label:"Token",permalink:"/next/tags/token"},{label:"Tokens",permalink:"/next/tags/tokens"},{label:"Refresh",permalink:"/next/tags/refresh"},{label:"Refresh Token",permalink:"/next/tags/refresh-token"},{label:"Refresh Tokens",permalink:"/next/tags/refresh-tokens"}],version:"current",lastUpdatedBy:"Konstantin Protzen",lastUpdatedAt:1699114291,formattedLastUpdatedAt:"Nov 4, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Authentication",tags:["Auth","Authentication","Login","Token","Tokens","Refresh","Refresh Token","Refresh Tokens"]},sidebar:"tutorialSidebar",previous:{title:"Endpoints",permalink:"/next/category/endpoints"},next:{title:"Homework",permalink:"/next/endpoints/homework"}},p={},l=[{value:"Authorization Code Grant",id:"authorization-code-grant",level:2},{value:"Requesting an Access Token",id:"requesting-an-access-token",level:3},{value:"Authorization URL Example",id:"authorization-url-example",level:4},{value:"Access Token Response",id:"access-token-response",level:4},{value:"Code Example",id:"code-example",level:4},{value:"Refreshing an Access Token",id:"refreshing-an-access-token",level:2},{value:"Authorization URL Example",id:"authorization-url-example-1",level:3},{value:"Code Example",id:"code-example-1",level:3},{value:"Authenticating to other Endpoints",id:"authenticating-to-other-endpoints",level:2},{value:"Code Example",id:"code-example-2",level:3}],c={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"To use any Endpoints of this API you will first need to Authenticate."),(0,r.kt)("p",null,"All Authentication Endpoints use the RFC6749-(OAuth2.0)-Standard."),(0,r.kt)("p",null,"In Version 1 of the API, users needed to authenticate using their password. This is not very secure because the user needs to trust the client (Your Application) and give it their password. So now we do not allow the ",(0,r.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749#section-4.3"},(0,r.kt)("inlineCode",{parentName:"a"},"Resource Owner Password Credentials Grant"))," anymore but rather supprt the ",(0,r.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749#section-4.1"},(0,r.kt)("inlineCode",{parentName:"a"},"Authorization Code Grant"))," and the ",(0,r.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749#section-4.2"},(0,r.kt)("inlineCode",{parentName:"a"},"Implicit Grant")),"!"),(0,r.kt)("p",null,"By using those Grant Types, the user gets redirected to Noten-App's Login Page and then authorizes your application which then is granted the access token."),(0,r.kt)("admonition",{title:"Recommended Grant Type",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"When using the Authorization Code Grant, the users Web-Browser generates a token with which your application can request the final Access Token whilst when using the Implicit Grant, the users Web-Browser requests the final Access Token ans relays that to your application."),(0,r.kt)("p",{parentName:"admonition"},"We recommend you use the Authorization Code Grant for applications where you need constant access to the users data. The Implicit Grant should only be used when a low number of requests need to be made like requesting a users ID one Time."),(0,r.kt)("p",{parentName:"admonition"},"This is due to the nature of Implicit Grant not allowing a refresh token to be generated, so you can only use the access token provided for the duration the access token is validated!")),(0,r.kt)("h2",{id:"authorization-code-grant"},"Authorization Code Grant"),(0,r.kt)("h3",{id:"requesting-an-access-token"},"Requesting an Access Token"),(0,r.kt)("p",null,"This Endpoint requires Parameters in ",(0,r.kt)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded")," format."),(0,r.kt)("h4",{id:"authorization-url-example"},"Authorization URL Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://api.noten-app.de/v2/auth/authorize?response_type=code&client_id=s6bhdrkq&state=xyz&redirect_uri=\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"grant_type"),' parameter MUST be set to "code" as this indicates you want to use the Authorization Code Grant Type. The ',(0,r.kt)("inlineCode",{parentName:"p"},"client_id")," parameter is the ID you received when registering your application in the developer portal. The ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect_uri")," parameter is the URI you want to receive the auhtorization code under. The ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," parameter is a parameter defined by ",(0,r.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749#section-10.12"},(0,r.kt)("inlineCode",{parentName:"a"},"RFC6749 - Section 10.12")),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect_uri")," can only be one of the URIs you registered within the developer-portal!\nOtherwise the user and you will be notified and the user cant authenticate to your application!")),(0,r.kt)("h4",{id:"access-token-response"},"Access Token Response"),(0,r.kt)("p",null,"A response could look something like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "DFw6zar4QF33Rb6jfp7cQj2UvcrAKgun",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "refresh_token": "lCVzojP2OGkggXm9NRFflppHXoSjWeKu"\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"access_token")," is the token you need to authenticate in any further requests, the ",(0,r.kt)("inlineCode",{parentName:"p"},"token_type")," always is 'Bearer'. The ",(0,r.kt)("inlineCode",{parentName:"p"},"expires_in"),"-parameter describes for how many seconds the access_token is valid (3600 seconds = 1 hour). The ",(0,r.kt)("inlineCode",{parentName:"p"},"refresh_token")," should be used to request a new access_token once the current one expired."),(0,r.kt)("h4",{id:"code-example"},"Code Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const axios = require("axios").default;\n\nconst options = {\n  method: "GET",\n  url: "https://api.noten-app.de/v1/auth/token",\n  params: { grant_type: "password", username: "johndoe", password: "A3ddj3w" },\n};\n\naxios\n  .request(options)\n  .then(function (response) {\n    console.log(response.data);\n  })\n  .catch(function (error) {\n    console.error(error);\n  });\n')),(0,r.kt)("h2",{id:"refreshing-an-access-token"},"Refreshing an Access Token"),(0,r.kt)("p",null,"The flow to refresh your Access Token also follows the ",(0,r.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749#section-6"},"RFC6749-(OAuth2.0)-Standard (Section 6)"),"."),(0,r.kt)("h3",{id:"authorization-url-example-1"},"Authorization URL Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://api.noten-app.de/v1/auth/refresh?grant_type=refresh_token&refresh_token=lCVzojP2OGkggXm9NRFflppHXoSjWeKu\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"grant_type"),' parameter MUST be set to "refresh_token" as this request is used to refresh an Access Token. The ',(0,r.kt)("inlineCode",{parentName:"p"},"refresh_token")," parameter is the Refresh Token you received when requesting an Access Token."),(0,r.kt)("p",null,"The response to this will be the same as when requesting an Access Token. (You get a new Access Token and a new Refresh Token)!"),(0,r.kt)("h3",{id:"code-example-1"},"Code Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'var axios = require("axios").default;\n\nvar options = {\n  method: "GET",\n  url: "https://api.noten-app.de/v1/auth/refresh",\n  params: {\n    grant_type: "refresh_token",\n    refresh_token: "lCVzojP2OGkggXm9NRFflppHXoSjWeKu",\n  },\n};\n\naxios\n  .request(options)\n  .then(function (response) {\n    console.log(response.data);\n  })\n  .catch(function (error) {\n    console.error(error);\n  });\n')),(0,r.kt)("h2",{id:"authenticating-to-other-endpoints"},"Authenticating to other Endpoints"),(0,r.kt)("p",null,"To authenticate to any Endpoints just add a authentication Header containing the access_token."),(0,r.kt)("h3",{id:"code-example-2"},"Code Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'var axios = require("axios").default;\n\nvar options = {\n  method: "GET",\n  url: "https://api.noten-app.de/v1/classes",\n  headers: {\n    Authorization: "Bearer DFw6zar4QF33Rb6jfp7cQj2UvcrAKgun",\n  },\n};\n\naxios\n  .request(options)\n  .then(function (response) {\n    console.log(response.data);\n  })\n  .catch(function (error) {\n    console.error(error);\n  });\n')))}d.isMDXComponent=!0}}]);